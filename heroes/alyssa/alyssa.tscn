[gd_scene load_steps=24 format=3 uid="uid://dctjqnt85jp8c"]

[ext_resource type="Script" path="res://heroes/alyssa/alyssa.gd" id="1_h8uc8"]
[ext_resource type="QuadMesh" uid="uid://blaghjjksd8bs" path="res://heroes/alyssa/material/particles_aura_alyssa.tres" id="2_rybij"]
[ext_resource type="PackedScene" uid="uid://dvaipocthe14r" path="res://comps/scenes/damage_mgr_component.tscn" id="3_57ypq"]
[ext_resource type="PackedScene" uid="uid://bqfjg41cgqsu2" path="res://graphics/3d models/heroes/Alyssa.glb" id="3_88g55"]
[ext_resource type="PackedScene" uid="uid://d20x3gfrmoext" path="res://comps/scenes/health_component.tscn" id="4_wyq3f"]
[ext_resource type="PackedScene" uid="uid://ek5hq7khlfdc" path="res://comps/scenes/battack_component.tscn" id="5_arwbl"]
[ext_resource type="PackedScene" uid="uid://bid6uhyybfx4x" path="res://comps/scenes/navigation_component.tscn" id="6_pm5oo"]
[ext_resource type="PackedScene" uid="uid://cwhihpdu5pw3h" path="res://comps/scenes/gui_component.tscn" id="8_sf6u0"]
[ext_resource type="PackedScene" uid="uid://bfx1wxpmwujue" path="res://comps/scenes/sanity_component.tscn" id="9_8dw4y"]
[ext_resource type="PackedScene" uid="uid://boihyru5nyiju" path="res://comps/scenes/xp_component.tscn" id="10_02r4u"]
[ext_resource type="PackedScene" uid="uid://cg1wvqhrrctxm" path="res://comps/scenes/animation_component.tscn" id="12_peu32"]
[ext_resource type="PackedScene" uid="uid://podwdpuarh5s" path="res://comps/scenes/state_machine_component.tscn" id="12_ps31n"]
[ext_resource type="PackedScene" uid="uid://cx88lgs15cpdr" path="res://comps/scenes/effects_component.tscn" id="12_yjyu3"]
[ext_resource type="Script" path="res://scripts/states/HeroAliveState.gd" id="13_66c1f"]
[ext_resource type="PackedScene" uid="uid://cgi1jsu0cv2xa" path="res://objs/cast/scenes/continuous_circular_area.tscn" id="13_06643"]
[ext_resource type="Script" path="res://scripts/states/HeroDeadState.gd" id="14_hkx2i"]
[ext_resource type="Material" uid="uid://7s52l7ud3a8x" path="res://graphics/materials/cast_generico.tres" id="14_r8liw"]
[ext_resource type="PackedScene" uid="uid://bb82m0a0q1pso" path="res://objs/pointer/scenes/direction_pointer.tscn" id="15_jcv68"]
[ext_resource type="PackedScene" uid="uid://bt3p7cj7om1ne" path="res://objs/pointer/scenes/target_pointer.tscn" id="16_dptv7"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_2ssv6"]
angle_max = 360.0
direction = Vector3(0, 1, 0)
spread = 5.0
initial_velocity_min = 1.0
initial_velocity_max = 16.0
gravity = Vector3(0, 0, 0)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_pt7wg"]
radius = 0.221336
height = 1.6

[sub_resource type="SphereShape3D" id="SphereShape3D_l26lp"]
radius = 10.0

[sub_resource type="SphereMesh" id="SphereMesh_llq3x"]
material = ExtResource("14_r8liw")
radius = 10.0
height = 10.0
is_hemisphere = true

[node name="Alyssa" type="CharacterBody3D" node_paths=PackedStringArray("p_p", "dmgr", "xp_comp", "batk_comp", "fx_comp", "anim_comp", "state_machine_comp", "q_p", "r_p")]
script = ExtResource("1_h8uc8")
p_p = NodePath("Abilities/P(ContCircArea)")
dmgr = NodePath("comps/DamageMgrComponent")
xp_comp = NodePath("comps/XPComponent")
batk_comp = NodePath("comps/BAttackComponent")
fx_comp = NodePath("comps/EffectsComponent")
anim_comp = NodePath("comps/AnimationComponent")
state_machine_comp = NodePath("comps/StateMachineComponent")
q_p = NodePath("Abilities/Q(Direction)")
r_p = NodePath("Abilities/R(Target)")

[node name="GPUParticles3D" type="GPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0101285, 1.14831, -0.00225324)
amount = 35
lifetime = 0.01
preprocess = 19.48
speed_scale = 0.1
fixed_fps = 120
process_material = SubResource("ParticleProcessMaterial_2ssv6")
draw_pass_1 = ExtResource("2_rybij")

[node name="3DModel" parent="." instance=ExtResource("3_88g55")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="3DModel/Armature" index="0"]
bones/0/position = Vector3(0.877376, -6.05835, -83.8559)
bones/0/rotation = Quaternion(-0.686733, -0.246703, 0.269219, 0.628535)
bones/1/rotation = Quaternion(0.126848, 0.0633281, -0.00973561, 0.989851)
bones/2/rotation = Quaternion(0.0190204, 0.00803443, -0.00856519, 0.99975)
bones/3/rotation = Quaternion(0.0191543, 0.00798857, -0.00835457, 0.99975)
bones/4/rotation = Quaternion(-0.0404217, 0.116689, 0.0340815, 0.99176)
bones/5/rotation = Quaternion(0.0702424, 0.176952, -0.0217845, 0.981468)
bones/7/rotation = Quaternion(0.590135, 0.399449, -0.59113, 0.377818)
bones/8/position = Vector3(4.43563e-06, 8.17561, 2.06355e-05)
bones/8/rotation = Quaternion(0.61688, -0.448402, 0.047125, 0.645115)
bones/9/rotation = Quaternion(-0.121441, 0.0212988, 0.888189, 0.442627)
bones/10/position = Vector3(-1.0074e-05, 16.487, 1.0435e-05)
bones/10/rotation = Quaternion(0.0933223, -0.209476, -0.0262324, 0.972997)
bones/11/rotation = Quaternion(0.303432, 0.031765, 0.31527, 0.898624)
bones/12/rotation = Quaternion(-0.0908912, -0.0857829, -0.362767, 0.923461)
bones/13/position = Vector3(-0.228487, 2.8812, 1.25227e-05)
bones/13/rotation = Quaternion(-0.24588, 0.145294, -0.102942, 0.952804)
bones/15/rotation = Quaternion(0.442185, 0.00597795, -0.00164566, 0.896902)
bones/16/rotation = Quaternion(0.71689, 0.00306809, -0.0843171, 0.692062)
bones/17/rotation = Quaternion(0.463558, 0.00688473, -0.0522181, 0.8845)
bones/19/rotation = Quaternion(0.366743, -0.0120298, -0.0122421, 0.930164)
bones/20/rotation = Quaternion(0.827848, 0.0250063, -0.0859159, 0.553769)
bones/21/position = Vector3(-0.0403397, 2.46759, 8.4473e-06)
bones/21/rotation = Quaternion(0.403775, 0.00237513, -0.0514578, 0.913407)
bones/23/rotation = Quaternion(0.46013, 0.0233524, 0.0173891, 0.887374)
bones/24/rotation = Quaternion(0.86546, 0.00993462, -0.0950494, 0.491779)
bones/25/rotation = Quaternion(0.548173, 0.0104188, -0.0598671, 0.834155)
bones/27/rotation = Quaternion(0.438469, -0.0507073, -0.0511044, 0.895859)
bones/28/position = Vector3(0.0288639, 2.38208, 1.508e-05)
bones/28/rotation = Quaternion(0.723172, 0.0116316, -0.0824627, 0.685629)
bones/29/rotation = Quaternion(0.852826, 0.00490882, -0.106028, 0.511294)
bones/31/rotation = Quaternion(0.599649, -0.407249, 0.46119, 0.511735)
bones/32/rotation = Quaternion(0.679299, 0.287189, -0.391748, 0.550099)
bones/33/rotation = Quaternion(-0.121421, -0.0209908, -0.889814, 0.439372)
bones/34/rotation = Quaternion(-0.00595375, 0.30978, -0.0515115, 0.949393)
bones/35/rotation = Quaternion(0.316957, -0.0285555, -0.338759, 0.885418)
bones/36/rotation = Quaternion(-0.0994024, 0.0885588, 0.377314, 0.916467)
bones/37/rotation = Quaternion(-0.313215, -0.114942, 0.163331, 0.928444)
bones/39/rotation = Quaternion(0.419887, -0.00125178, -0.00468072, 0.907564)
bones/40/rotation = Quaternion(0.737031, -0.00723767, 0.0583466, 0.673297)
bones/41/rotation = Quaternion(0.411675, 0.000263692, 0.0363072, 0.910607)
bones/43/rotation = Quaternion(0.336119, 0.0103646, -0.00663367, 0.941739)
bones/44/position = Vector3(-0.0521426, 2.9764, -2.05755e-05)
bones/44/rotation = Quaternion(0.835254, -0.0186587, 0.0578557, 0.546493)
bones/45/position = Vector3(0.0371056, 2.91672, 5.53202e-06)
bones/45/rotation = Quaternion(0.39637, -0.000970047, 0.0347673, 0.917432)
bones/47/rotation = Quaternion(0.413094, -0.013396, -0.0252377, 0.91024)
bones/48/rotation = Quaternion(0.883003, -0.0103767, 0.0654264, 0.464669)
bones/49/position = Vector3(0.0124234, 2.64425, 1.49399e-05)
bones/49/rotation = Quaternion(0.558419, -0.0102863, 0.0414921, 0.828457)
bones/51/rotation = Quaternion(0.398013, 0.060591, 0.0432423, 0.914355)
bones/52/rotation = Quaternion(0.756584, -0.0110563, 0.0547059, 0.65151)
bones/53/rotation = Quaternion(0.871518, -0.0108199, 0.0711377, 0.485055)
bones/55/rotation = Quaternion(0.0981054, 0.279392, 0.936632, -0.187178)
bones/56/rotation = Quaternion(-0.545722, 0.0718137, -0.00925558, 0.834832)
bones/57/rotation = Quaternion(0.577515, 0.0945957, -0.129525, 0.80047)
bones/58/rotation = Quaternion(0.396953, -0.0944558, 0.0400316, 0.912088)
bones/60/rotation = Quaternion(-0.137002, 0.206762, 0.930548, 0.269368)
bones/61/rotation = Quaternion(-0.548118, 0.0201414, -0.080446, 0.83228)
bones/62/rotation = Quaternion(0.579246, 0.0233885, 0.162888, 0.79837)
bones/63/rotation = Quaternion(0.413397, 0.0984523, -0.0442637, 0.90413)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.8, 0)
shape = SubResource("CapsuleShape3D_pt7wg")

[node name="comps" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, 0)

[node name="DamageMgrComponent" parent="comps" node_paths=PackedStringArray("health_component", "effects_component") instance=ExtResource("3_57ypq")]
health_component = NodePath("../HealthComponent")
effects_component = NodePath("../EffectsComponent")

[node name="HealthComponent" parent="comps" node_paths=PackedStringArray("hero") instance=ExtResource("4_wyq3f")]
hero = NodePath("../..")

[node name="GUIComponent" parent="comps" node_paths=PackedStringArray("health_comp", "sanity_comp", "fx_comp") instance=ExtResource("8_sf6u0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.87577, 0)
health_comp = NodePath("../HealthComponent")
sanity_comp = NodePath("../SanityComponent")
fx_comp = NodePath("../EffectsComponent")

[node name="SanityComponent" parent="comps" node_paths=PackedStringArray("health_comp") instance=ExtResource("9_8dw4y")]
health_comp = NodePath("../HealthComponent")

[node name="XPComponent" parent="comps" node_paths=PackedStringArray("dead_state", "hero") instance=ExtResource("10_02r4u")]
dead_state = NodePath("../StateMachineComponent/HeroDeadState")
hero = NodePath("../..")

[node name="NavigationComponent" parent="comps" node_paths=PackedStringArray("hero") instance=ExtResource("6_pm5oo")]
debug_enabled = true
speed = 8.0
desired_distance = 0.5
hero = NodePath("../..")

[node name="BAttackComponent" parent="comps" node_paths=PackedStringArray("nav_comp", "hero") instance=ExtResource("5_arwbl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.4, 0)
atk_damage = 15.0
atk_cooldown = 0.7
range = 2.0
nav_comp = NodePath("../NavigationComponent")
hero = NodePath("../..")

[node name="AnimationComponent" parent="comps" node_paths=PackedStringArray("nav_comp", "batk_comp", "hero") instance=ExtResource("12_peu32")]
nav_comp = NodePath("../NavigationComponent")
batk_comp = NodePath("../BAttackComponent")
hero = NodePath("../..")

[node name="StateMachineComponent" parent="comps" node_paths=PackedStringArray("initial_state") instance=ExtResource("12_ps31n")]
initial_state = NodePath("HeroAliveState")

[node name="HeroAliveState" type="Node" parent="comps/StateMachineComponent" node_paths=PackedStringArray("nav", "battack", "xp_comp", "hero", "health_comp")]
script = ExtResource("13_66c1f")
nav = NodePath("../../NavigationComponent")
battack = NodePath("../../BAttackComponent")
xp_comp = NodePath("../../XPComponent")
hero = NodePath("../../..")
health_comp = NodePath("../../HealthComponent")

[node name="HeroDeadState" type="Node" parent="comps/StateMachineComponent" node_paths=PackedStringArray("hero")]
script = ExtResource("14_hkx2i")
hero = NodePath("../../..")

[node name="EffectsComponent" parent="comps" node_paths=PackedStringArray("health_comp", "sanity_comp", "hero") instance=ExtResource("12_yjyu3")]
health_comp = NodePath("../HealthComponent")
sanity_comp = NodePath("../SanityComponent")
hero = NodePath("../..")

[node name="Abilities" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, 0)

[node name="P(ContCircArea)" parent="Abilities" instance=ExtResource("13_06643")]
radius = 10.0
delay = 0.1
time = -1.0

[node name="CollisionShape3D" parent="Abilities/P(ContCircArea)/Area3D" index="0"]
shape = SubResource("SphereShape3D_l26lp")

[node name="MeshInstance3D" parent="Abilities/P(ContCircArea)/Area3D" index="1"]
visible = false
mesh = SubResource("SphereMesh_llq3x")

[node name="Q(Direction)" parent="Abilities" instance=ExtResource("15_jcv68")]

[node name="R(Target)" parent="Abilities" instance=ExtResource("16_dptv7")]
range = 8.0

[editable path="3DModel"]
[editable path="Abilities/P(ContCircArea)"]
